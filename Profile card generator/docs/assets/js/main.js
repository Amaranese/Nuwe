"use strict";const inputName=document.querySelector(".input-name"),resultName=document.querySelector(".resultName"),addText=function(){""===inputName.value?resultName.innerHTML="No me borres üê≤":resultName.innerHTML=inputName.value};inputName.addEventListener("keyup",addText);const inputJob=document.querySelector(".input-job"),resultJob=document.querySelector(".resultJob"),addText1=function(){""===inputJob.value?resultJob.innerHTML="No me borres üåã":resultJob.innerHTML=inputJob.value};inputJob.addEventListener("keyup",addText1);let email=document.querySelector("#email"),phone=document.querySelector("#phone"),linkedin=document.querySelector("#linkedin"),github=document.querySelector("#github");const itemEmail=document.querySelector(".list__item--email"),itemPhone=document.querySelector(".list__item--phone"),itemLinkedin=document.querySelector(".list__item--linkelind"),itemGithub=document.querySelector(".list__item--github");function printEmail(e){const t=e.currentTarget.value;itemEmail.innerHTML=""===t?"":`<a href="mailto:${t}" class="card__list--link far fa-envelope email__icon" target="_blank">email</a>`}function printPhone(e){const t=e.currentTarget.value;itemPhone.innerHTML=""===t?"":`<a href="tel:${t}" class="card__list--link fas fa-mobile-alt phone__icon" target="_blank">mobile</a>`}function printLinkedin(e){const t=e.currentTarget.value;itemLinkedin.innerHTML=""===t?"":`<a href="https://www.linkedin.com/in/${t}" class="card__list--link fab fa-linkedin-in linkedin__icon" target="_blank">linkedin</a>`}function printGithub(e){const t=e.currentTarget.value;itemGithub.innerHTML=""===t?"":`<a href="https://github.com/${t}" class="card__list--link fab fa-github-alt github__icon" target="_blank">github</a>`}email.addEventListener("keyup",printEmail),phone.addEventListener("keyup",printPhone),linkedin.addEventListener("keyup",printLinkedin),github.addEventListener("keyup",printGithub);const preview=document.querySelector(".section__card"),radio1=document.getElementById("settings__palette1"),radio2=document.getElementById("settings__palette2"),radio3=document.getElementById("settings__palette3");function changeColor(e){preview.classList.remove("option1","option2","option3"),preview.classList.add(e)}radio1.addEventListener("click",function(){changeColor("option1")}),radio2.addEventListener("click",function(){changeColor("option2")}),radio3.addEventListener("click",function(){changeColor("option3")});const titleContainer=document.querySelectorAll(".collapsible__title"),sections=document.querySelectorAll(".section__fieldset");function collapsePlease(e){const t=e.currentTarget;if(t.parentElement.classList.contains("hidden__collapsible")){for(const e of sections)e.classList.add("hidden__collapsible");t.parentElement.classList.remove("hidden__collapsible")}else t.parentElement.classList.add("hidden__collapsible")}for(const e of titleContainer)e.addEventListener("click",collapsePlease);const fillForm=document.querySelector(".fill__form"),inputBoxes=fillForm.querySelectorAll("input"),buttonReset=document.querySelector(".card__reset"),cardName=document.querySelector(".card__name"),cardJob=document.querySelector(".card__job-title"),cardPhoto=document.querySelector(".card__photo"),previewImg=document.querySelector(".preview__image"),previewCard=document.querySelector(".section__card"),previewLists=document.querySelectorAll(".list__item"),defaultUser={name:"Nombre Apellido",job:"Front end developer",photo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1M8A6NkzDknLi9qdwF89W_Nhgd2Ru9D5s7REKbxWgpUo4TtL7",palette:1,email:"",phone:"",linkedin:"",github:""};function resetFields(){for(const e of inputBoxes)e.value="";previewImg.style.backgroundImage="url()"}function resetCard(){cardName.innerHTML=defaultUser.name,cardJob.innerHTML=defaultUser.job,cardPhoto.style.backgroundImage=`url(${defaultUser.photo})`;for(const e of previewLists)e.innerHTML=""}function resetPalette(){radio1.checked=!0,radio2.checked=!1,radio3.checked=!1,previewCard.classList.remove("option1","option2","option3"),previewCard.classList.add("option1")}const reset=()=>{resetFields(),resetCard(),resetPalette()};buttonReset.addEventListener("click",reset);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,imageToSave=fr.result}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const submitButton=document.querySelector(".share__button"),responseURL=document.querySelector(".response"),field=document.querySelector("#field"),fullName=document.querySelector("#fullName"),jobTitle=document.querySelector("#jobTitle");let email1=document.querySelector("#email"),phone1=document.querySelector("#phone"),linkedin1=document.querySelector("#linkedin"),github1=document.querySelector("#github");const fileInput=document.querySelector("#selectImage");let imageToSave="";const devImage=document.querySelector(".share__created--link"),shareTwitter=document.querySelector(".twitter");function getUserInfostr(){const e={palette:document.querySelector(".desidn__radio:checked").value,name:fullName.value,job:jobTitle.value,phone:phone1.value,email:email1.value,linkedin:linkedin1.value,github:github1.value,photo:imageToSave},t=JSON.stringify(e);return localStorage.setItem("userInfo",t),t}function loadUserInfo(){const e=localStorage.getItem("userInfo");if(null!==e){const t=JSON.parse(e);changeColor(`option${t.palette}`),fullName.value=t.name,jobTitle.value=t.job,phone1.value=t.phone,email1.value=t.email,linkedin1.value=t.linkedin,github1.value=t.github,profilePreview.style.backgroundImage=`url(${t.photo})`,imageToSave=t.photo,resultName.innerHTML=t.name,resultJob.innerHTML=t.job,itemEmail.innerHTML=`<a href="mailto:${t.email}" class="card__list--link far fa-envelope email__icon" target="_blank">email</a>`,itemPhone.innerHTML=`<a href="tel:${t.phone}" class="card__list--link fas fa-mobile-alt phone__icon" target="_blank">mobile</a>`,itemLinkedin.innerHTML=`<a href="https://www.linkedin.com/in/${t.linkedin}" class="card__list--link fab fa-linkedin-in linkedin__icon" target="_blank">linkedin</a>`,itemGithub.innerHTML=`<a href="https://github.com/${t.github}" class="card__list--link fab fa-github-alt github__icon" target="_blank">github</a>`,profileImage.style.backgroundImage=`url(${t.photo})`,imageToSave=t.photo;const n=document.querySelectorAll(".desidn__radio");for(const e of n)e.value===t.palette?e.checked=!0:e.checked=!1}}function sendRequest(e){e.preventDefault(),fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:getUserInfostr(),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>{devImage.innerHTML=`<a href="${e.cardURL}" target="_blank">${e.cardURL}</a>`,!1===e.succes&&console.log(e.error),shareTwitter.innerHTML=`<a href="http://twitter.com/home?status=Echa%20un%20vistazo%20a%20mi%20tarjeta%20profesional%20üëÄüíº%20${e.cardURL}" target="_blank" rel="noopener" class="share__created--twitter"><i class="share__created--twitter-img fab fa-twitter"></i> Compartir en twitter</a>`})}function resetUserInfo(){localStorage.removeItem("userInfo")}submitButton.addEventListener("click",sendRequest),buttonReset.addEventListener("click",resetUserInfo),loadUserInfo();const shareCreated=document.querySelector(".share__created"),shareBtn=document.querySelector(".share__button");function appear(){shareCreated.classList.remove("share__hidden")}shareCreated.classList.add("share__hidden"),shareBtn.addEventListener("click",appear);